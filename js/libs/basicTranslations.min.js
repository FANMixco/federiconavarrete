const uLang=(window.navigator.userLanguage||window.navigator.language).split("-")[0],validLang=["en","es","zh"],jsonLoc=`js/i18n/${1===validLang.indexOf(uLang)?uLang:"en"}/min`,smallScreen=smallScreenMobileOS||equalScreen;let tErr1,genericTranslations,basicInfo,currentLoc="";function addExtraIcons(){document.querySelectorAll(".btn-preview").forEach((e=>{e.innerHTML=`${getFinalIcon("gallery",21)}&ensp;${e.innerHTML}`})),document.querySelectorAll(".btn-book").forEach((e=>{e.innerHTML=`${getFinalIcon("download")}&nbsp;&nbsp;${e.innerHTML}`}))}function retry(e,n,t,r){let a=t();a?r(null,a):e<=0?r(new Error("Max retries reached")):setTimeout((function(){retry(e-1,n,t,r)}),n)}fetchData(`${jsonLoc}/generics.json`).then((e=>{genericTranslations=e,loadTranslationsWithRetry(loadTranslations,(function(e){e||fetchData(`${jsonLoc}/basicInfo.json`).then((e=>{basicInfo=e,loadTranslationsWithRetry(loadBasicInfo,(function(){})),addExtraIcons()})).catch((e=>{console.error(e)}))}))})).catch((e=>{console.error(e)}));let loadTranslationsWithRetry=function(e,n){retry(3,150,e,n)};function loadTranslations(){try{return document.querySelectorAll("button.btn-close").forEach((e=>{e.setAttribute("aria-label",genericTranslations.close)})),document.querySelectorAll("[data-translation]").forEach((e=>{e.innerHTML=genericTranslations[e.dataset.translation]})),document.querySelectorAll("[data-title-translation]").forEach((e=>{const n=genericTranslations[e.dataset.titleTranslation];e.setAttribute("aria-label",n),e.title=n})),document.querySelectorAll(".btn-preview").forEach((e=>{e.addEventListener(eClick,(()=>{currentLoc=currentLoc!=e.dataset.action?e.dataset.action:currentLoc;const n=`${urlB}${currentLoc}.federiconavarrete.com`,t="apps"==currentLoc?genericTranslations.projectsGallery:genericTranslations.presentationsGallery,r=getIframe(t,`${n}?isIframe=true`,'id="gPreview" allowfullscreen'),a=document.getElementById("divPreview");document.getElementById("zoomTitle").innerHTML=t,a.innerHTML=r;const o=document.getElementById("btn-full-screen");o.href=n,o.setAttribute("title",t),o.setAttribute("aria-label",t);const i=document.getElementById("gPreview");let l="450px";if(smallScreen){const e=window.matchMedia("(orientation: portrait)");l=`${equalScreen?.6*document.documentElement.clientHeight:e.matches?.85*document.documentElement.clientHeight:.7*document.documentElement.clientHeight}px`}else devicePortraitAndLong&&(l="675px");i.style.height=l}))})),!0}catch{return!1}}function loadBasicInfo(){try{const{name:e,headline:n,headlineIntro:t,aboutDesc:r,favBook:a,favPodcast:o,company:i}=basicInfo,l=document.getElementById("hName"),c=document.getElementById("hHeadline"),s=document.getElementById("hIntro"),d=document.getElementById("divAbout"),u=document.getElementById("favBook"),m=document.getElementById("favPodcast");document.querySelectorAll(".nav-link").forEach((e=>{e.addEventListener(eClick,(()=>{isMenuTriggered=!0,0===extraContact&&setTimeout(contactMeForm,5e3),extraContact++}))})),document.querySelectorAll(".mFix").forEach((e=>{e.addEventListener(eClick,(()=>{const e=this;tErr1=setTimeout((()=>{e.click(),clearTimeout(tErr1),hFixCMenu()}),500)}))})),l.innerHTML=e,c.innerHTML=n,s.innerHTML=t,d.innerHTML="",r.forEach((e=>{d.innerHTML+=`<div class="col-sm"><p class="lead">${e}</p></div>`})),u.innerHTML=getActionBtn(`${urlB}${a.link}`,"download",a.title),m.innerHTML=getActionBtn(`${urlB}${o.link}`,"spotify",o.title);const g=document.getElementById("listContacts");return g.innerHTML=getInLineBtn(i.name,`${urlB}${i.link}`,"building-solid",!0)+g.innerHTML,document.getElementById("aElSalvador").addEventListener(eClick,(()=>{const e=document.getElementById("divIframElSalvador");e||(e.innerHTML=getIframe("SV Map",`${urlB}www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1984252.4374393197!2d-90.05167866086293!3d13.749114461377241!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8f6327a659640657%3A0x6f9a16eb98854832!2sEl+Salvador!5e0!3m2!1sen!2spl!4v1555793789038!5m2!1sen!2spl`,'id="iframeElSalvador" class="previewerIframe" style=\'background: url("img/icons/loading.gif") center/7em no-repeat\''),iFrameHResize("iframeElSalvador"))}),!1),document.querySelectorAll("#linkContactMe, #linkContactMeAbout, #contactMeFloat").forEach((e=>{e.addEventListener(eClick,contactMeForm)})),document.getElementById("youTubePreview").addEventListener(eClick,(()=>{const e=document.getElementById("gTitle");e.innerHTML=genericTranslations.winning,e.classList.remove(nVis);document.getElementById("gDivTitle").classList.remove("border-0");document.getElementById("modal-preview").classList.add("modal-xl"),document.getElementById("iframeGeneric").innerHTML=getIframe("Federico Navarrete",`${urlB}www.youtube.com/embed/IcWZ962uYy0`,'id="yIframeP" class="previewerIframe" style=\'background: url("img/icons/loading.gif") center/7em no-repeat\''),iFrameHResize("yIframeP",.7);const n=document.getElementById("btn-full-screen-preview");n.href=`${urlB}bit.ly/3p9hMGJ`,n.setAttribute("title",genericTranslations.winning),n.setAttribute("aria-label",genericTranslations.winning)})),document.querySelectorAll(".iLang").forEach((e=>{e.src=`pages/${e.getAttribute("data-page")}.html?lang=${uLang}`})),!0}catch{return!1}}document.addEventListener("DOMContentLoaded",(function(){const e=getHMenu();document.getElementById("menuExpander").addEventListener(eClick,(()=>{spanMenu.innerHTML=spanMenu.innerHTML===e?getHMenu("cross"):e}))}));