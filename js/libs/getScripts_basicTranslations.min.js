const getScript=e=>new Promise(((n,t)=>{const a=document.createElement("script");a.src=e,a.async=!0,a.onerror=t,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,n())},document.head.appendChild(a)}));async function fetchData(e){try{const n=await fetch(e);return await n.json()}catch(e){console.error("Error loading JSON:",e)}}const language=window.navigator.userLanguage||window.navigator.language,langLoc="js/i18n/",validLang=["en","es","zh"],lMin="/min";let tErr1,genericTranslations,basicInfo,currentLoc="",lang=`en-us${lMin}`;function addExtraIcons(){[...document.getElementsByClassName("btn-preview")].forEach((function(e){e.innerHTML=getFinalIcon("gallery",21)+"&ensp;"+e.innerHTML})),[...document.getElementsByClassName("btn-book")].forEach((function(e){e.innerHTML=getFinalIcon("download")+"&nbsp;&nbsp;"+e.innerHTML}))}function retry(e,n,t,a){let o=t();o?a(null,o):e<=0?a(new Error("Max retries reached")):setTimeout((function(){retry(e-1,n,t,a)}),n)}lang=language.includes("es")?`es-sv${lMin}`:language.includes("zh")?`zh-zh${lMin}`:lang,fetchData(`${langLoc}${lang}/generics.json`).then((e=>{genericTranslations=e,loadTranslationsWithRetry(loadTranslations,(function(e){e||fetchData(`${langLoc}${lang}/basicInfo.json`).then((e=>{basicInfo=e,loadTranslationsWithRetry(loadBasicInfo,(function(){})),addExtraIcons()})).catch((e=>{console.error(e)}))}))})).catch((e=>{console.error(e)}));let loadTranslationsWithRetry=function(e,n){retry(3,150,e,n)};function loadTranslations(){try{return[...document.querySelectorAll("button.btn-close")].forEach((e=>{e.setAttribute("aria-label",genericTranslations.close)})),document.querySelectorAll("[data-translation]").forEach((e=>{e.innerHTML=genericTranslations[`${e.dataset.translation}`]})),document.querySelectorAll("[data-title-translation]").forEach((e=>{e.setAttribute("aria-label",genericTranslations[`${e.dataset.titleTranslation}`]),e.title=genericTranslations[`${e.dataset.titleTranslation}`]})),[...document.querySelectorAll(".btn-preview")].forEach((function(e){e.addEventListener(eClick,(function(){currentLoc=currentLoc!=e.dataset.action?e.dataset.action:currentLoc;const n=`https://${currentLoc}.federiconavarrete.com`,t="apps"==currentLoc?genericTranslations.projectsGallery:genericTranslations.presentationsGallery,a=getIframe(t,`${n}?isIframe=true`,'id="gPreview" allowfullscreen'),o=document.getElementById("divPreview");document.getElementById("zoomTitle").innerHTML=t,o.innerHTML=a;const i=document.getElementById("btn-full-screen");i.href=n,i.setAttribute("title",t),i.setAttribute("aria-label",t);let r=document.getElementById("gPreview");let c="450px";if(smallScreenMobileOS||equalScreen){let e=window.matchMedia("(orientation: portrait)");c=`${equalScreen?.6*document.documentElement.clientHeight:e.matches?.85*document.documentElement.clientHeight:.7*document.documentElement.clientHeight}px`}else devicePortraitAndLong&&(c="675px");r.style.height=c}))})),!0}catch{return!1}}function loadBasicInfo(){try{const{name:e,headline:n,headlineIntro:t,aboutDesc:a,favBook:o,favPodcast:i,telephone:r,email:c,skype:l,company:s}=basicInfo,d=document.getElementById("hName"),m=document.getElementById("hHeadline"),u=document.getElementById("hIntro"),g=document.getElementById("divAbout"),f=document.getElementById("favBook"),E=document.getElementById("favPodcast");[...document.querySelectorAll(".nav-link")].forEach((function(e){e.addEventListener(eClick,(function(e){isMenuTriggered=!0,0==extraContact&&setTimeout((function(){contactMeForm()}),5e3),extraContact++}))})),[...document.querySelectorAll(".mFix")].forEach((function(e){e.addEventListener(eClick,(function(e){tErr1=setTimeout((function(e){e.click(),clearTimeout(tErr1),hFixCMenu()}),500,this)}))})),d.innerHTML=e,m.innerHTML=n,u.innerHTML=t;const y="https://";a.forEach((e=>{g.innerHTML+=`<div class="col-sm"><p class="lead">${e}</p></div>`})),o.isVisible?f.innerHTML+=getActionBtn(`${y}${o.link}`,iconsPath,"download",o.title):f.classList.add(nVis),i.isVisible?E.innerHTML+=getActionBtn(`${y}${i.link}`,iconsPath,"spotify",i.title):E.classList.add(nVis);const h=document.getElementById("listContacts");s.isVisible&&(h.innerHTML=getInLineBtn(s.name,`${y}${s.link}`,"building-solid",!0)+h.innerHTML);document.getElementById("aElSalvador").addEventListener(eClick,(function(){if(!document.getElementById("iframeElSalvador")){document.getElementById("divIframElSalvador").innerHTML+=getIframe("El Salvador Map","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1984252.4374393197!2d-90.05167866086293!3d13.749114461377241!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8f6327a659640657%3A0x6f9a16eb98854832!2sEl+Salvador!5e0!3m2!1sen!2spl!4v1555793789038!5m2!1sen!2spl",'id="iframeElSalvador" class="previewerIframe" style=\'background: url("img/icons/loading.gif") center/7em no-repeat\''),iFrameHResize("iframeElSalvador")}}),!1);document.getElementById("linkContactMe").addEventListener(eClick,contactMeForm);document.getElementById("linkContactMeAbout").addEventListener(eClick,contactMeForm);document.getElementById("contactMeFloat").addEventListener(eClick,contactMeForm);const L=document.getElementById("youTubePreview");let v=document.getElementById("iframeGeneric");return L.addEventListener(eClick,(()=>{const e=document.getElementById("gTitle");e.innerHTML=genericTranslations.winning,e.classList.remove("d-none");document.getElementById("gDivTitle").classList.remove("border-0");document.getElementById("modal-preview").classList.add("modal-xl"),v.innerHTML=getIframe("Federico Navarrete","https://www.youtube.com/embed/IcWZ962uYy0",'id="yIframeP" class="previewerIframe" style=\'background: url("img/icons/loading.gif") center/7em no-repeat\''),iFrameHResize("yIframeP",.7);const n=document.getElementById("btn-full-screen-preview");n.href="https://bit.ly/3p9hMGJ",n.setAttribute("title",genericTranslations.winning),n.setAttribute("aria-label",genericTranslations.winning)})),!0}catch{return!1}}document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("menuExpander"),n=getHMenu(),t=getHMenu("cross");e.addEventListener("click",(function(){spanMenu.innerHTML=spanMenu.innerHTML===n?t:n}))}));