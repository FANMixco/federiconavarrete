async function fetchData(e){try{const t=await fetch(e);return await t.json()}catch(e){console.error("Error loading JSON:",e)}}function loadLegends(e){const t="../img/legends/",n=document.createDocumentFragment();e.forEach((e=>{const a=e.isActive?" active":"",s=document.createElement("div");s.className=`carousel-item col-md-4${a}`,s.innerHTML=`<div class="card">\n                                    <div class="img-thumbnail">\n                                        <a class="text-warning legend-link" target="_blank" href="https://${e.link}">\n                                            <picture>\n                                                <source srcset="${t}${e.img}.webp" type="image/webp">\n                                                <source srcset="${t}${e.img}.jpg" type="image/jpeg">\n                                                <img src="${t}${e.img}.jpg" alt="${e.title}" class="cards-row">\n                                            </picture>\n                                            <div class="caption">\n                                                <p><b>${e.title}</b></p>\n                                            </div>\n                                        </a>\n                                    </div>\n                                </div>`,n.appendChild(s)})),document.getElementById("divLegends").appendChild(n)}window.addEventListener("DOMContentLoaded",(async()=>{try{const e=(window.navigator.userLanguage||window.navigator.language).includes("es")?"es-sv/min":"en-us/min";loadLegends((await fetchData(`../js/data/translations/${e}/legendsList.json`)).legendsList)}catch(e){console.error(e)}let e=document.getElementById("legendsCarousel");e.addEventListener("slide.bs.carousel",(function(t){let n=t.relatedTarget,a=Array.from(n.parentNode.children).indexOf(n),s=document.getElementsByClassName("carousel-item").length;if(a>=s-2){let n=3-(s-a),o=document.getElementsByClassName("carousel-item");for(let a=0;a<n;a++)"left"==t.direction?o[a].parentNode.appendChild(o[a]):e.querySelector(".carousel-inner").appendChild(o[0])}}),{passive:!0}),document.querySelectorAll(".carousel").forEach((function(e){e.addEventListener("touchstart",(function(t){let n=t.touches[0].pageX;e.addEventListener("touchmove",(function(t){let a=t.touches[0].pageX;Math.floor(n-a)>5?e.carousel("next"):Math.floor(n-a)<-5&&e.carousel("prev")}),{passive:!0}),e.addEventListener("touchend",(function(){e.removeEventListener("touchmove")}),{passive:!0})}))}))}));